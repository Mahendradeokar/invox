<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{invoiceTitle}}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @media print {
        html,
        body {
          -webkit-print-color-adjust: exact;
          color-adjust: exact;
          box-shadow: none !important;
        }
        .no-print {
          display: none !important;
        }
      }

      @page {
        size: A4;
        margin: 0;
      }
    </style>
  </head>
  <body class="bg-white text-black font-sans text-sm">
    <div class="mx-auto w-[90vw] max-w-[794px] aspect-[210/297] p-6">
      <!-- Company Info -->
      <div
        class="grid grid-cols-3 gap-4 border-b border-black pb-4 items-center"
      >
        <div class="flex items-center space-x-3 col-span-2">
          <img
            src="{{companyLogo}}"
            alt="{{companyName}} Logo"
            class="h-12 w-auto"
          />
          <div>
            <h2 class="text-xl font-semibold">{{companyName}}</h2>
            <p>{{companyTagline}}</p>
            <p>{{from.address}}</p>
            <p>Phone: {{from.phone}}</p>
            <p>Email: {{from.email}}</p>
            <p>Website: {{from.website}}</p>
          </div>
        </div>
        <div class="text-right">
          <h1 class="text-3xl font-bold tracking-wider">INVOICE</h1>
          <p><span class="font-semibold">GSTIN:</span> {{from.gstin}}</p>
        </div>
      </div>

      <!-- Invoice Metadata -->
      <div class="grid grid-cols-3 gap-4 border-b border-black py-4 text-sm">
        <div>
          <p><span class="font-semibold">Invoice#</span> {{invoice.number}}</p>
          <p>
            <span class="font-semibold">Invoice Date</span> {{invoice.date}}
          </p>
          <p>
            <span class="font-semibold">Terms</span> {{invoice.paymentTerms}}
          </p>
          <p><span class="font-semibold">Due Date</span> {{invoice.dueDate}}</p>
          <p>
            <span class="font-semibold">PO Number</span> {{invoice.poNumber}}
          </p>
          <p><span class="font-semibold">Project</span> {{invoice.project}}</p>
        </div>
      </div>

      <!-- Bill To -->
      <div class="grid grid-cols-2 gap-4 border-b border-black py-4">
        <div>
          <p class="font-semibold border-b border-black mb-1">Bill To</p>
          <p class="font-bold">{{billTo.name}}</p>
          <p>{{billTo.address}}</p>
          <p>Contact: {{billTo.contact}}</p>
          <p>Phone: {{billTo.phone}}</p>
          <p>Email: {{billTo.email}}</p>
          <p>GSTIN: {{billTo.gstin}}</p>
        </div>
      </div>

      <!-- Item Table -->
      <table class="w-full border border-black mt-4">
        <thead class="bg-gray-200 text-left">
          <tr>
            <!-- <th class="border border-black p-2">#</th> -->
            <th class="border border-black p-2">Item & Description</th>
            <th class="border border-black p-2 text-right">HSN</th>
            <th class="border border-black p-2 text-right">Qty</th>
            <th class="border border-black p-2 text-right">Unit Price</th>
            <th class="border border-black p-2 text-right">Discount</th>
            <th class="border border-black p-2 text-right">Taxable Value</th>
            <th class="border border-black p-2 text-right">GST</th>
            <th class="border border-black p-2 text-right">Total</th>
          </tr>
        </thead>
        <tbody>
          {{#each items}}
          <tr>
            <!-- <td class="border border-black p-2">{{@index}}</td> -->
            <td class="border border-black p-2">{{description}}</td>
            <td class="border border-black p-2 text-right">{{hsn}}</td>
            <td class="border border-black p-2 text-right">{{qty}}</td>
            <td class="border border-black p-2 text-right">₹{{unitPrice}}</td>
            <td class="border border-black p-2 text-right">{{discount}}</td>
            <td class="border border-black p-2 text-right">
              ₹{{taxableValue}}
            </td>
            <td class="border border-black p-2 text-right">
              ₹{{sum "[cgst sgst igst]"}}
            </td>
            <td class="border border-black p-2 text-right">₹{{total}}</td>
          </tr>
          {{/each}}
        </tbody>
      </table>

      <!-- Totals -->
      <div class="flex justify-end mt-4">
        <div class="w-1/2 border border-black p-4">
          <div class="flex justify-between border-b border-black pb-2">
            <span class="font-semibold">Subtotal</span>
            <span>₹{{totals.subtotal}}</span>
          </div>
          <div class="flex justify-between border-b border-black pb-2">
            <span>GST Total</span>
            <span>₹{{totals.totalGST}}</span>
          </div>
          <div
            class="flex justify-between border-b border-black py-2 font-semibold"
          >
            <span>Total Amount</span>
            <span>₹{{totals.totalAmount}}</span>
          </div>
          <div class="flex justify-between border-b border-black py-2">
            <span>Amount Paid</span>
            <span>₹{{totals.amountPaid}}</span>
          </div>
          <div class="flex justify-between pt-2 font-bold text-lg">
            <span>Balance Due</span>
            <span>₹{{totals.balanceDue}}</span>
          </div>
        </div>
      </div>

      <!-- Payment Info -->
      <div class="mt-6 text-sm">
        <p class="font-semibold">Payment Details</p>
        <p>Bank: {{payment.bank}}</p>
        <p>Account Number: {{payment.accountNumber}}</p>
        <p>IFSC: {{payment.ifsc}}</p>
        <p>UPI: {{payment.upi}}</p>
        <p class="mt-2 italic">{{payment.note}}</p>
      </div>

      <!-- Terms & Footer -->
      <div class="mt-6 text-sm">
        <p><strong>Terms:</strong> {{terms}}</p>
        <p class="mt-4">{{footerNote}}</p>
        <p class="mt-2">Support Email: {{support.email}}</p>
        <p>Support Phone: {{support.phone}}</p>
      </div>
    </div>
  </body>
</html>
